<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Pages::Page</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Pages::Page</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/pages_rb.html">
                lib/pages.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000014">backlinks</a>&nbsp;&nbsp;
      <a href="#M000012">content</a>&nbsp;&nbsp;
      <a href="#M000013">delete</a>&nbsp;&nbsp;
      <a href="#M000015">embedded_in</a>&nbsp;&nbsp;
      <a href="#M000016">info</a>&nbsp;&nbsp;
      <a href="#M000017">move</a>&nbsp;&nbsp;
      <a href="#M000011">new</a>&nbsp;&nbsp;
      <a href="#M000018">rollback</a>&nbsp;&nbsp;
      <a href="#M000019">save</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">counter</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">lastrevid</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">length</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">namespace</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">new</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">title</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="#M000011" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(bot, title='')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="Page.html#M000011">new</a> <a href="Page.html">Page</a>
object.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000011-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000011-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 12</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">bot</span>, <span class="ruby-identifier">title</span>=<span class="ruby-value str">''</span>)
      <span class="ruby-ivar">@bot</span> = <span class="ruby-identifier">bot</span>

      <span class="ruby-comment cmt"># Get page attributes</span>
      <span class="ruby-identifier">info</span> = <span class="ruby-identifier">info</span>(<span class="ruby-identifier">title</span>)

      <span class="ruby-ivar">@title</span>      = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'title'</span>]
      <span class="ruby-ivar">@namespace</span>  = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'ns'</span>]
      <span class="ruby-ivar">@new</span>        = <span class="ruby-identifier">info</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value str">'new'</span>)
      <span class="ruby-ivar">@length</span>     = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'length'</span>]
      <span class="ruby-ivar">@counter</span>    = <span class="ruby-identifier">info</span> [<span class="ruby-value str">'counter'</span>]
      <span class="ruby-ivar">@lastrevid</span>  = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'lastrevid'</span>]
      <span class="ruby-ivar">@missing</span>    = <span class="ruby-identifier">info</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value str">'missing'</span>)

    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="#M000014" class="method-signature">
          <span class="method-name">backlinks</span><span class="method-args">(titles, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method fetches any article that links to the article given in
&#8216;title&#8217;. Returned in alphabetical order.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000014-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000014-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 61</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">backlinks</span> (<span class="ruby-identifier">titles</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">VersionTooLowError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">meets_version_requirement</span>(<span class="ruby-value">1</span>,<span class="ruby-value">9</span>)

      <span class="ruby-comment cmt"># This will get all pages. Limits vary based on user rights of the Bot. Set to bot.</span>
      <span class="ruby-identifier">post_me</span> = {<span class="ruby-value str">'list'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'backlinks'</span>, <span class="ruby-value str">'titles'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{title}&quot;</span> }


      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
        <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">post_me</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-comment cmt">#make the request</span>
      <span class="ruby-identifier">backlinks_result</span> = <span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'query'</span>, <span class="ruby-identifier">post_me</span>)

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">backlinks_result</span>.<span class="ruby-identifier">success?</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">backlinks_result</span>.<span class="ruby-identifier">get_result</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'backlinks'</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">backlinks_result</span>.<span class="ruby-identifier">get_message</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="#M000012" class="method-signature">
          <span class="method-name">content</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This will get only the <a href="Page.html#M000012">content</a> of the
article. It is a modification of revisions to specifically pull the <a
href="Page.html#M000012">content</a>. I thought it would be useful.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000012-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000012-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 29</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)

      <span class="ruby-identifier">post_me</span> = {<span class="ruby-value str">'prop'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'revisions'</span>, <span class="ruby-value str">'titles'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@title</span>, <span class="ruby-value str">'rvprop'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}

      <span class="ruby-comment cmt"># Handle any additional options</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
        <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">post_me</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-comment cmt"># Make the request. Becuase we care.</span>
      <span class="ruby-identifier">revisions_result</span> = <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'query'</span>, <span class="ruby-identifier">post_me</span> )
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">revisions_result</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'pages'</span>).<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'page'</span>).<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'revisions'</span>).<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'rev'</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="#M000013" class="method-signature">
          <span class="method-name">delete</span><span class="method-args">(reason=&quot;Deleted by RWikiBot&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If you have to ask what this method does, don&#8216;t use it. Seriously,
use with caution - this method does not have a confirmation step, and
deleted (while restorable) are immediate.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000013-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000013-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 47</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">reason</span>=<span class="ruby-value str">&quot;Deleted by RWikiBot&quot;</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">RWBErrors</span><span class="ruby-operator">::</span><span class="ruby-constant">VersionTooLowError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">meets_version_requirement</span>(<span class="ruby-value">1</span>,<span class="ruby-value">12</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">RWBErrors</span><span class="ruby-operator">::</span><span class="ruby-constant">NotLoggedInError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">logged_in?</span>

      <span class="ruby-identifier">post_me</span> = {
        <span class="ruby-value str">'title'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@title</span> ,
        <span class="ruby-value str">'token'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">get_token</span>(<span class="ruby-value str">'delete'</span>) ,
        <span class="ruby-value str">'reason'</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">reason</span>
      }

      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">delete_result</span> = <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'delete'</span>,<span class="ruby-identifier">post_me</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="#M000015" class="method-signature">
          <span class="method-name">embedded_in</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method pulls any page that includes the template requested. Please
note - the template must be the full name, like
&quot;Template:Disputed&quot; or &quot;Template:Awesome&quot;.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000015-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000015-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 85</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">embedded_in</span> (<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">VersionTooLowError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">meets_version_requirement</span>(<span class="ruby-value">1</span>,<span class="ruby-value">9</span>)

      <span class="ruby-comment cmt"># This will get all pages. Limits vary based on user rights of the Bot. Set to bot.</span>
      <span class="ruby-identifier">post_me</span> = {<span class="ruby-value str">'list'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'embeddedin'</span>, <span class="ruby-value str">'eititle'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@title</span> }

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
        <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">post_me</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-comment cmt">#make the request</span>
      <span class="ruby-identifier">embeddedin_result</span> = <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'query'</span>, <span class="ruby-identifier">post_me</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">embeddedin_result</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'embeddedin'</span>).<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'ei'</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="#M000016" class="method-signature">
          <span class="method-name">info</span><span class="method-args">(titles)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
I decided to split this up since I wanted to normalize the bot framework as
much as possible, or in other words, make it as easy to use as possible. I
think the sacrifice of more methods is worth having more English looking
code. Its the Ruby way. Info will return information about the page, from
namespace to normalized title, last touched, etc.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000016-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000016-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 104</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">info</span>  (<span class="ruby-identifier">titles</span>)
      <span class="ruby-comment cmt"># Basic quqery info</span>
      <span class="ruby-identifier">post_me</span> = {<span class="ruby-value str">&quot;prop&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;info&quot;</span>, <span class="ruby-value str">'titles'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">titles</span>}

      <span class="ruby-comment cmt"># Make the request</span>
      <span class="ruby-identifier">info_result</span> = <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'query'</span>, <span class="ruby-identifier">post_me</span>)

      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">info_result</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'pages'</span>).<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'page'</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="#M000017" class="method-signature">
          <span class="method-name">move</span><span class="method-args">(to, reason, movetalk = true, noredirect = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method will let you <a href="Page.html#M000017">move</a> a page from
one name to another. A <a href="Page.html#M000017">move</a> token is
required for this to work. Keep that in mind. (get_token much?)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000017-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000017-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 115</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">move</span>(<span class="ruby-identifier">to</span>, <span class="ruby-identifier">reason</span>, <span class="ruby-identifier">movetalk</span> = <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">noredirect</span> = <span class="ruby-keyword kw">false</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">RWBErrors</span><span class="ruby-operator">::</span><span class="ruby-constant">VersionTooLowError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">meets_version_requirement</span>(<span class="ruby-value">1</span>,<span class="ruby-value">12</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">RWBErrors</span><span class="ruby-operator">::</span><span class="ruby-constant">NotLoggedInError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">logged_in?</span>

      <span class="ruby-identifier">post_me</span> = {
        <span class="ruby-value str">'from'</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@title</span> ,
        <span class="ruby-value str">'to'</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{to}&quot;</span> ,
        <span class="ruby-value str">'token'</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">get_token</span>(<span class="ruby-value str">'move'</span>) ,
        <span class="ruby-value str">'reason'</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{reason}&quot;</span> ,
      }

      <span class="ruby-comment cmt"># These ifs are necessary because they should only be part of post_me if the passed vars are true (which they are by default)</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">movetalk</span>
        <span class="ruby-identifier">post_me</span>[<span class="ruby-value str">'movetalk'</span>] = <span class="ruby-value str">''</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">noredirect</span>
        <span class="ruby-identifier">post_me</span>[<span class="ruby-value str">'noredirect'</span>] = <span class="ruby-value str">''</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'move'</span>, <span class="ruby-identifier">post_me</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="#M000018" class="method-signature">
          <span class="method-name">rollback</span><span class="method-args">(summary=&quot;&quot;, markbot=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Rollback does what it says - rolls back an article one version in the wiki.
This is a function that requires not only a token, but a previous user.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000018-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000018-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 138</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rollback</span> (<span class="ruby-identifier">summary</span>=<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">markbot</span>=<span class="ruby-keyword kw">true</span>)

      <span class="ruby-identifier">temp_token</span> = <span class="ruby-identifier">get_token</span>(<span class="ruby-value str">&quot;rollback&quot;</span>) <span class="ruby-comment cmt"># special for rollback. Stupid rollback.</span>
      <span class="ruby-identifier">post_me</span> = {
        <span class="ruby-value str">'title'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@title</span>,
        <span class="ruby-value str">'token'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">temp_token</span>[<span class="ruby-value str">'token'</span>],
        <span class="ruby-value str">'user'</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">temp_token</span>[<span class="ruby-value str">'user'</span>],
        <span class="ruby-value str">'summary'</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">summary</span>
      }

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">markbot</span>
        <span class="ruby-identifier">post_me</span>[<span class="ruby-value str">'markbot'</span>] = <span class="ruby-value str">''</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'rollback'</span>, <span class="ruby-identifier">post_me</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="#M000019" class="method-signature">
          <span class="method-name">save</span><span class="method-args">(content, summary = nil, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method is used to edit pages. Not much more to say about it. Be sure
you&#8216;re logged in and got a token (get_token). Options is an array (or
hash) of extra values allowed by the API.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000019-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000019-source">
<pre>
<span class="ruby-comment cmt"># File lib/pages.rb, line 156</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>(<span class="ruby-identifier">content</span>, <span class="ruby-identifier">summary</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)

      <span class="ruby-identifier">post_me</span> = {
        <span class="ruby-value str">'text'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{content}&quot;</span> ,
        <span class="ruby-value str">'token'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">get_token</span>(<span class="ruby-value str">&quot;edit&quot;</span>) ,
        <span class="ruby-value str">'title'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@title</span> ,
        <span class="ruby-comment cmt"># 'lgtoken' =&gt; @config['lgtoken'] ,</span>
        <span class="ruby-value str">'summary'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{summary}&quot;</span> ,
        <span class="ruby-value str">'edittime'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y%m%d%H%M%S&quot;</span>) ,
        <span class="ruby-comment cmt"># 'userid' =&gt; @config.fetch('lguserid') ,</span>
      }

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">==</span> <span class="ruby-constant">FALSE</span>
        <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">post_me</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@bot</span>.<span class="ruby-identifier">make_request</span>(<span class="ruby-value str">'edit'</span>, <span class="ruby-identifier">post_me</span>).<span class="ruby-identifier">fetch</span>(<span class="ruby-value str">'result'</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>