<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: RWikiBot</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">RWikiBot</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/rwikibot_rb.html">
                lib/rwikibot.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This is the main bot object. The goal is to represent every API method in
some form here, and then write seperate, cleaner scripts in individual bot
files utilizing this framework. Basically, this is an include at best.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000009">all_pages</a>&nbsp;&nbsp;
      <a href="#M000010">backlinks</a>&nbsp;&nbsp;
      <a href="#M000011">embedded_in</a>&nbsp;&nbsp;
      <a href="#M000012">info</a>&nbsp;&nbsp;
      <a href="#M000005">log_events</a>&nbsp;&nbsp;
      <a href="#M000002">login</a>&nbsp;&nbsp;
      <a href="#M000015">make_unique</a>&nbsp;&nbsp;
      <a href="#M000001">new</a>&nbsp;&nbsp;
      <a href="#M000008">normalize</a>&nbsp;&nbsp;
      <a href="#M000016">page_exists?</a>&nbsp;&nbsp;
      <a href="#M000004">recent_changes</a>&nbsp;&nbsp;
      <a href="#M000007">redirect?</a>&nbsp;&nbsp;
      <a href="#M000006">redirects</a>&nbsp;&nbsp;
      <a href="#M000013">revisions</a>&nbsp;&nbsp;
      <a href="#M000014">site_info</a>&nbsp;&nbsp;
      <a href="#M000003">watchlist</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">botname</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">config</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">http</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000001.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000001.html');return false;">
          <span class="method-name">new</span><span class="method-args">(name = &quot;Unnamed Bot&quot;, config = 'default', debuglevel = Logger::DEBUG, log_location = &quot;./rwikibot.log&quot; )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
New bots hope for three attributes, but require none. The first is simply
the name of the bot for logging purposes. The second is the debug level
constant, and third is the logfile.
</p>
<p>
Example: bot = <a href="RWikiBot.html#M000001">RWikiBot.new</a>(&quot;My
Neat Bot&quot;, Logger::DEBUG, &quot;./rwikibot.log&quot;)
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000009.html');return false;">
          <span class="method-name">all_pages</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
List
</p>
<p>
This will return a list of all pages in a given namespace. It returns a
list of pages in with the normalized title and page ID, suitable for usage
elsewhere. Accepts all parameters from the API in Hash form. Default is
namespace =&gt; 0, which is just plain pages. Nothing
&#8216;special&#8217;. Also note that if the username the Bot uses is not
of type Bot in the Wiki, you will be limited to 50 articles. Also log in,
or you get an error.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A hash of API-allowed keys and values. Default is same as API default.

</td></tr>
<tr><td valign="top">PARAMETERS:</td><td>apfrom (paging), apnamespace (dflt=0), apredirect (flt), aplimit (dflt=10,
max=500/5000)

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes with information about the pages.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000010.html');return false;">
          <span class="method-name">backlinks</span><span class="method-args">(titles, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
List
</p>
<p>
This method fetches any article that links to the article given in
&#8216;title&#8217;. Returned in alphabetical order.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A normalized article title or titles (pipe delimited), and a hash of
API-allowed keys and values. Default is same as API default.

</td></tr>
<tr><td valign="top">PARAMETERS:</td><td>blfrom (paging), blnamespace (flt), blredirect (flt), bllimit (dflt=10,
max=500/5000)

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes with backlinked articles.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000011.html');return false;">
          <span class="method-name">embedded_in</span><span class="method-args">(title, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
List
</p>
<p>
This method pulls any page that includes the template requested. Please
note - the template must be the full name, like
&quot;Template:Disputed&quot; or &quot;Template:Awesome&quot;. Just one,
please.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A normalized template title, and a hash of API-allowed keys and values.
Default is same as API default.

</td></tr>
<tr><td valign="top">PARAMETERS:</td><td>eifrom (paging), einamespace (flt), eiredirect (flt), eilimit (dflt=10,
max=500/5000)

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes with articles using said template.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000012.html');return false;">
          <span class="method-name">info</span><span class="method-args">(titles)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Prop = Info
</p>
<p>
I decided to split this up since I wanted to <a
href="RWikiBot.html#M000008">normalize</a> the bot framework as much as
possible, or in other words, make it as easy to use as possible. I think
the sacrifice of more methods is worth having more English looking code.
Its the Ruby way. Info will return information about the page, from
namespace to normalized title, last touched, etc.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>This method only takes titles, but will accept a pipe-delimited string. Ex:
&quot;Apple|Baseball|Horse|Main Page&quot;

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000005.html');return false;">
          <span class="method-name">log_events</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
List
</p>
<p>
This will reutrn a list of the most recent log events. Useful for bots who
want to validate log events, or even just a notify bot that checks for
events and sends them off.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A hash of API-allowed keys and values. Default is same as API default.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes containing log events.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000002.html');return false;">
          <span class="method-name">login</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Login
</p>
<p>
This is the method that will allow the bot to log in to the wiki. Its not
always necessary, but bots need to log in to save changes or retrieve
watchlists.
</p>
<p>
No variables are accepted and the username/password are stored in
config.yaml.
</p>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000015.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000015.html');return false;">
          <span class="method-name">make_unique</span><span class="method-args">(array)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The point of this method is to iterate through an array of hashes, which
most of the other methods return, and remove multiple instances of the same
wiki page. We&#8216;re more than often only concerned with the most recent
revision, so we&#8216;ll delete old ones.
</p>
<p>
Hashes don&#8216;t respond to the the Array.uniq method. So this is the
same-ish
</p>
<table>
<tr><td valign="top">INPUT:</td><td>An array of hashes.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes that are unique.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000008.html');return false;">
          <span class="method-name">normalize</span><span class="method-args">(title)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Query
</p>
<p>
This little ditty returns a normalized version of the title passed to it.
It is super useful because it will <a
href="RWikiBot.html#M000008">normalize</a> an otherise poorly entered
title, but most importantly it will let us know if an article exists or not
by if it is able to <a href="RWikiBot.html#M000008">normalize</a>.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>Titles, either singular or pipe-delimited.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of normalized hashes.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000016.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000016.html');return false;">
          <span class="method-name">page_exists?</span><span class="method-args">(title)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is a little something I cooked up because it seems like a totally
logical thing for bots to want to do. Basically, you feed it a page title -
any you want (that&#8216;s the point) - and it returns TRUE or FALSE if the
page exists inside the wiki. Technically, it pulls an attribute
&quot;missing&quot;, and in its presense, reports TRUE since the page is
fake. That&#8216;s something a bot would want to do, right?
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A title. Just one!

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>TRUE/FALSE, depending on which is correct

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000004.html');return false;">
          <span class="method-name">recent_changes</span><span class="method-args">(options=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Query
</p>
<p>
This method will return Wiki-wide recent changes, almost as if looking at
the Special page Recent Changes. But, in this format, a bot can handle it.
Also we&#8216;re using the API. And bots can&#8216;t read.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A hash of API-allowed keys and values. Default is same as API default.

</td></tr>
<tr><td valign="top">PARAMETERS:</td><td>letype (flt), lefrom (paging timestamp), leto (flt), ledirection
(dflt=older), leuser (flt), letitle (flt), lelimit (dflt=10, max=500/5000)

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000007.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000007.html');return false;">
          <span class="method-name">redirect?</span><span class="method-args">(title)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Query
</p>
<p>
This is a lot like REDIRECTS method, except its just a true/false to
validate whether or not an article is a redirect. We could write the logic
into the final bot app, but we&#8216;re awesome and we include a quicky
method.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>Title (please, just one!)

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>True/False

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000006.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000006.html');return false;">
          <span class="method-name">redirects</span><span class="method-args">(title, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Query
</p>
<p>
This will return any <a href="RWikiBot.html#M000006">redirects</a> from an
article title so that you know where it ends. Useful to check for <a
href="RWikiBot.html#M000006">redirects</a>, but mostly here for
completeness of the framework.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A string of pipe-delimited titles (&#8216;Apple|Baseball|Car port&#8217;),
and an optional hash of API acceptable values.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of <a href="RWikiBot.html#M000006">redirects</a>.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000013.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000013.html');return false;">
          <span class="method-name">revisions</span><span class="method-args">(titles, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Prop - Revisions
</p>
<p>
This is the main way of accessing content and page specific information
from the wiki. It has multiple uses as described in the API, Its also
considerably more complex than the other methods. Enjoy it. A final note -
I&#8216;d really be familiar with this method in the API since I&#8216;ve
spent a lot of time trying to figure it out myself.
</p>
<p>
Please be sure to add the RVPROP key at least, otherwise you&#8216;ll just
get the basic information of revid, oldid and pageid. Boring.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>A string of article titles (pipe-delimited), and a hash of API-allowed keys
and values. Default is same as API default.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>An array of hashes.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000014.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000014.html');return false;">
          <span class="method-name">site_info</span><span class="method-args">(siprop = 'general')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Meta
</p>
<p>
This is the only meta method. It will return site information. I chose not
to allow it to specify, and it will only return all known properties.
api.php?action=query&amp;meta=siteinfo&amp;siprop=general|namespaces
</p>
<table>
<tr><td valign="top">INPUT:</td><td>siprop is either &#8216;general&#8217; or &#8216;namespaces&#8217;.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>A hash of values about site information.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="RWikiBot.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('RWikiBot.src/M000003.html');return false;">
          <span class="method-name">watchlist</span><span class="method-args">(options=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Watchlist
</p>
<p>
This method will get the <a href="RWikiBot.html#M000003">watchlist</a> for
the bot&#8216;s MediaWiki username. This is really onlu useful if you want
the bot to watch a specific list of pages, and would require the bot
maintainer to <a href="RWikiBot.html#M000002">login</a> to the wiki as the
bot to set the <a href="RWikiBot.html#M000003">watchlist</a>.
</p>
<table>
<tr><td valign="top">INPUT:</td><td>Options is a hash of API allowed fields that will be passed.

</td></tr>
<tr><td valign="top">OUTPUT:</td><td>Returns an array of hashes.

</td></tr>
</table>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>